{% extends "shared/base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-8 animate-[fadeIn_0.3s_ease-out]">

    <div
        class="flex items-center gap-2 text-[10px] font-mono text-zinc-600 uppercase tracking-[0.2em] border-b border-zinc-800 pb-2">
        <a href="/armory" class="hover:text-amber-500 transition">OP_CENTER</a>
        <span class="text-zinc-800">>></span>
        <span class="text-amber-600">PERSONNEL_FILE</span>
    </div>

    <!-- Personnel File Grid -->
    <div class="grid grid-cols-1 md:grid-cols-12 gap-8">

        <!-- ID Badge (Left Column) -->
        <div class="md:col-span-5 space-y-6">
            <h2 class="text-xs font-bold uppercase tracking-widest text-zinc-500 mb-4 flex items-center gap-2">
                <span class="w-1.5 h-1.5 bg-amber-600 rounded-sm"></span> Current Credentials
            </h2>

            <div
                class="relative bg-zinc-900 rounded shadow-2xl border border-zinc-700 overflow-hidden flex flex-col group select-none">
                <!-- Top Warning Band -->
                <div class="bg-amber-600 text-black text-[9px] font-bold uppercase tracking-[0.3em] py-1 text-center">
                    Level 5 Security Clearance
                </div>

                <div class="p-6 relative">
                    <!-- Scanlines -->
                    <div
                        class="absolute inset-0 bg-[linear-gradient(rgba(18,16,11,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] bg-[length:100%_2px,3px_100%] pointer-events-none z-0 opacity-20">
                    </div>

                    <!-- Header -->
                    <div class="flex justify-between items-start relative z-10 mb-6">
                        <div class="border border-zinc-600 p-1">
                            <div class="w-16 h-16 bg-zinc-800 flex items-center justify-center overflow-hidden">
                                {% if user.profile_image %}
                                <img src="/{{ user.profile_image }}"
                                    class="w-full h-full object-cover grayscale contrast-125">
                                {% else %}
                                <span class="text-2xl grayscale opacity-30">ðŸ‘¤</span>
                                {% endif %}
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-[0.6rem] text-zinc-500 uppercase tracking-widest mb-1">Affiliation</div>
                            <div class="text-xs font-bold text-white uppercase tracking-widest">TIB
                                PRIVATE<br>CONTRACTOR</div>
                        </div>
                    </div>

                    <!-- Info -->
                    <div class="space-y-3 relative z-10 font-mono text-xs">
                        <div>
                            <div class="text-[0.6rem] text-zinc-600 uppercase tracking-widest">Operative Name</div>
                            <div class="text-amber-500 uppercase font-bold">{{ user.full_name or
                                user.email.split('@')[0] }}</div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <div class="text-[0.6rem] text-zinc-600 uppercase tracking-widest">Callsign</div>
                                <div class="text-zinc-300">OP-{{ "%03d" | format(user.id) }}</div>
                            </div>
                            <div>
                                <div class="text-[0.6rem] text-zinc-600 uppercase tracking-widest">Status</div>
                                <div class="text-green-600 font-bold uppercase">Active</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom BarCode -->
                <div class="bg-white p-2"
                    style="background-image: repeating-linear-gradient(90deg, black 0, black 2px, white 2px, white 4px); height: 30px; opacity: 0.8">
                </div>
            </div>

            <div class="text-[10px] text-zinc-600 font-mono text-center">
                UNAUTHORIZED ACCESS IS A FELONY.
            </div>
        </div>

        <!-- Edit Form (Right Column) -->
        <div class="md:col-span-7 bg-zinc-900/50 border border-zinc-800 p-6 md:p-8 relative">
            <!-- Corner Accents -->
            <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-amber-600"></div>
            <div class="absolute top-0 right-0 w-2 h-2 border-t border-r border-amber-600"></div>
            <div class="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-amber-600"></div>
            <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-amber-600"></div>

            <h1 class="text-xl font-ops text-zinc-300 uppercase tracking-widest mb-8 flex items-center gap-3">
                <span class="text-amber-600">///</span> Update Dossier
            </h1>

            <form action="/auth/profile" method="POST" enctype="multipart/form-data" class="space-y-6">

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-1">
                        <label class="block text-[0.65rem] font-bold text-zinc-500 uppercase tracking-widest">Profile
                            Photo</label>
                        <input type="file" name="profile_image" accept="image/*"
                            class="block w-full text-[10px] text-zinc-400 file:mr-4 file:py-2 file:px-4 file:border-0 file:text-[10px] file:font-bold file:bg-zinc-800 file:text-amber-500 hover:file:bg-zinc-700 file:uppercase transition cursor-pointer">
                    </div>

                    <div class="space-y-1">
                        <label class="block text-[0.65rem] font-bold text-zinc-500 uppercase tracking-widest">Full
                            Designation (Name)</label>
                        <input type="text" name="full_name" value="{{ user.full_name or '' }}"
                            class="w-full bg-zinc-950 border border-zinc-700 text-white px-3 py-2 text-sm focus:outline-none focus:border-amber-600 transition font-mono placeholder-zinc-800">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-6">
                    <div class="space-y-1">
                        <label class="block text-[0.65rem] font-bold text-zinc-500 uppercase tracking-widest">Comms
                            (Phone)</label>
                        <input type="tel" name="phone" value="{{ user.phone or '' }}" placeholder="+1 (555) 000-0000"
                            class="w-full bg-zinc-950 border border-zinc-700 text-white px-3 py-2 text-sm focus:outline-none focus:border-amber-600 transition font-mono placeholder-zinc-800">
                    </div>
                    <div class="space-y-1">
                        <label class="block text-[0.65rem] font-bold text-zinc-500 uppercase tracking-widest">Region
                            (State)</label>
                        <input type="text" name="state" value="{{ user.state or '' }}"
                            class="w-full bg-zinc-950 border border-zinc-700 text-white px-3 py-2 text-sm focus:outline-none focus:border-amber-600 transition font-mono placeholder-zinc-800">
                    </div>
                </div>

                <div class="space-y-1">
                    <label class="block text-[0.65rem] font-bold text-zinc-500 uppercase tracking-widest">Sector
                        (City)</label>
                    <input type="text" name="city" value="{{ user.city or '' }}"
                        class="w-full bg-zinc-950 border border-zinc-700 text-white px-3 py-2 text-sm focus:outline-none focus:border-amber-600 transition font-mono placeholder-zinc-800">
                </div>

                <div class="pt-6 flex justify-end">
                    <button type="submit"
                        class="bg-amber-700/20 hover:bg-amber-600 text-amber-500 hover:text-white border border-amber-600/50 hover:border-amber-500 px-6 py-2 text-xs font-bold uppercase tracking-widest transition-all duration-300">
                        Update Records
                    </button>
                </div>

            </form>
        </div>

    </div>
</div>
{% endblock %}